{
  "openapi": "3.0.1",
  "info": {
    "title": "API RDV insertion",
    "version": "v1",
    "description": "L'API de rdv-insertion vous permet d'inviter des personnes en insertion à prendre rdv avec votre structure.\nQuand l'usager aura pris rendez-vous suite à son invitation, vous pouvez récupérer les informations du rdv via les webhooks (API de notifications).\n\nToutes les fonctionnalités de rdv-insertion ne sont pas encore disponibles via l’API. Contactez-nous si vous avez besoin de fonctionnalités qui ne sont pas encore présentes.\n\n# Requêtes\n\nL'API adhère aux principes REST :\n\n- requêtes `GET` : lecture sans modification\n- requêtes `POST` : création de nouvelle ressource\n- requêtes `PATCH` : mise à jour d'une ressource existante\n- requêtes `DELETE` : suppression d'une ressource\n\nLes paramètres des requêtes `GET` doivent être envoyés via les query string de la requête.\n\nLes paramètres des requêtes `POST` doivent être transmis dans le corps de la requête sous un format JSON valide, et doivent contenir le header `Content-Type: application/json`.\n\n# Routes\n\nLes endpoints de l'API sont accessibles par une route de la forme : `https://<domain>/api/<version>/<endpoint>`.\n\nAvec :\n\n- `version` est la version de l'API\n- `endpoint` est le nom de l'endpoint\n\nPour la version production, les requêtes doivent être adressées à **https://www.rdv-insertion.fr**.\n\nPour la version démo, les requêtes doivent être adressées à **https://demo.rdv-insertion.fr**.\n\n# Authentification\n\nLes endpoints sont réservés aux agents authentifiés, dans la limite de leur rôle au sein de l'application.\n\nComme sur l'interface web, l'authentification se fait via les identifiants rdv-solidarités. **Il est donc nécessaire pour l'authentification d'appeler un endpoint sur rdv-solidarités et non pas sur rdv-insertion**. Les modalités de cet endpoint sont décrits ci-dessous.\n\n## Headers d'authentification\n\nTous les agents peuvent utiliser l'API. Les requêtes faites sur l'API sont authentifiées grace à des tokens d'accès associés à chaque agent. Chaque action faite via l'API est donc attribuable à un agent.\n\nPour récupérer le token d'accès d'un agent il faut faire une première requête `POST` à l'url `https://www.rdv-solidarites.fr/api/v1/auth/sign_in` en passant en paramètres JSON l'email et le mot de passe de l'agent. Par exemple (avec HTTPie) :\n\n```httpie\nhttp --json POST 'https://www.rdv-solidarites.fr/api/v1/auth/sign_in' \\\n  email='amine.dhobb@beta.gouv.fr' password='SOME_FAKE_PASSWORD_123456'\n```\n\nEn cas de succès d'authentification, la réponse à cette requête contiendra dans le corps le détail de l'agent, et dans les headers les token d'accès à l'API. Par exemple :\n\n```http\nHTTP/1.1 200 OK\nX-Frame-Options: SAMEORIGIN\nX-XSS-Protection: 1; mode=block\nX-Content-Type-Options: nosniff\nX-Download-Options: noopen\nX-Permitted-Cross-Domain-Policies: none\nReferrer-Policy: strict-origin-when-cross-origin\nContent-Type: application/json; charset=utf-8\naccess-token: SOME_FAKE_ACCESS_TOKEN_12345 token-type: Bearer\nclient: SOME_FAKE_CLIENT_12345 expiry: 1605600758\nuid: amine.dhobb@beta.gouv.fr\nETag: W/\"0fe52663d6745c922160384e13afe1e1\"\nCache-Control: max-age=0, private, must-revalidate\nX-Meta-Request-Version: 0.7.2\nX-Request-Id: 291fab6a-043b-4b9c-b4b9-3c7fc9c9453a\nX-Runtime: 0.194743< Transfer-Encoding: chunked\n* Connection #0 to host rdv-solidarites.fr left intact\n{\n  \"data\": {\n    \"email\": \"amine.dhobb@beta.gouv.fr\",\n    \"first_name\": \"Amine\",\n    \"last_name\": \"DHOBB\",\n    \"provider\": \"email\",\n    \"uid\": \"amine.dhobb@beta.gouv.fr\",\n    \"id\": 7,\n    \"deleted_at\": null,\n    \"service_id\": 4,\n    \"email_original\": null,\n    \"allow_password_change\": false,\n    \"rdv_notifications_level\": \"soon\",\n    \"unknown_past_rdv_count\": 171,\n    \"display_saturdays\": false,\n    \"display_cancelled_rdv\": true,\n    \"plage_ouverture_notification_level\": \"all\",\n    \"absence_notification_level\": \"all\",\n    \"external_id\": null,\n    \"calendar_uid\": null,\n    \"microsoft_graph_token\": null,\n    \"refresh_microsoft_graph_token\": null,\n    \"cnfs_secondary_email\": null,\n    \"outlook_disconnect_in_progress\": false,\n    \"account_deletion_warning_sent_at\": null\n  }\n}\n* Closing connection 0\n```\n\nLes 3 headers essentiels pour l'authentification sont les suivants :\n\n```http\naccess-token: SOME_FAKE_ACCESS_TOKEN_12345\nclient: SOME_FAKE_ACCESS_CLIENT_12345\nuid: amine.dhobb@beta.gouv.fr\n```\n\n- `access-token` : c'est le jeton d'accès qui vous a été attribué. Il a une durée de vie de 24h, après ça il vous faudra reproduire cette procédure pour en récupérer un nouveau.\n- `client` : un identifiant unique associé à l'appareil depuis lequel vous avez effectué la requête\n- `uid` : l'identifiant de l'agent dans l'API, égal à l'email de l'agent.\n\n**Ces 3 headers doivent être transmis avec chacune de vos requêtes successives à l'API**, peu importe la méthode HTTP.\n\n## Permissions\n\nLes rôles et permissions des agents sont les mêmes via l'API que depuis l'interface web.\n\n# Sérialisation\n\nL'API supporte uniquement le format JSON. Toutes les réponses envoyées par l'API contiendront le header `Content-Type: application/json` et leur contenu est présent dans le body dans un format JSON à désérialiser.\n\n# Codes de retour\n\nL'API est susceptible de retourner les codes suivants :\n\n| Code  | Nom                   | Description                                                                   |\n| ----- | --------------------- | ----------------------------------------------------------------------------- |\n| `200` | Success               | Succès                                                                        |\n| `204` | No Content            | Succès mais la réponse ne contient pas de données (exemple : suppression)     |\n| `400` | Bad Request           | La requête est invalide                                                       |\n| `401` | Unauthorized          | L'authentification a échoué                                                   |\n| `403` | Forbidden             | Droits insuffisants pour réaliser l'action demandée                           |\n| `404` | Not Found             | La ressource est introuvable                                                  |\n| `422` | Unprocessable Entity  | La donnée transmise est mal formattée                                         |\n| `429` | Too Many Requests     | Trop de requêtes ont été effectuées                                           |\n| `500` | Internal Server Error | Une erreur serveur produite (l'équipe technique est notifiée automatiquement) |\n\n# Erreurs\n\nEn cas d'erreur reconnue par le système (par exemple erreur 422), les champs suivants seront présents dans la réponse pour vous informer sur les problèmes :\n\n- `errors` : [ERREUR] : liste d'erreurs groupées par attribut problèmatique au format machine.\n\n# Endpoints\n\nLes endpoints exposés par l'API se trouvent en bas de page. Pour chaque endpoint, vous trouverez en plus du schéma d'entrée et de sortie un exemple de payload envoyé à l'API et un exemple de réponse de l'API.\nLe fonctionnement des endpoints de création et invitation des usagers est explicité dans la partie suivante.\n\n# Création et invitations des usagers à prendre rdv\n\nIl y a 2 façons d'inviter les usagers à prendre rdv:\n\n- En envoyant dans une seule requête une liste d'usager à inviter (endpoint `POST https://www.rdv-insertion.fr/api/v1/organisations/{rdv_solidarites_organisation_id}/users/create_and_invite_many`). **La création des fiches d'usagers et l'envoi des invitations se fera alors de manière asynchrone**.\n\n- En invitant une seule personne par requête (endpoint `POST https://www.rdv-insertion.fr/api/v1/organisations/{rdv_solidarites_organisation_id}/users/create_and_invite`). **La création de la fiche d'usager et l'envoi des invitations (mail et sms) se fera alors de manière synchrone**.\n\n**Pour ces 2 endpoints, une invitation par mail sera envoyée que si le mail de l'usager est présent, et une invitation par SMS est envoyée que si le téléphone de l'usager est renseigné**.\n\n## Paramètres de l'URL\n\n- `rdv_solidarites_organisation_id`: c'est l'ID de l'organisation sur RDV-Solidarités dans laquelle on veut créer et inviter l'usager. Ces IDs peuvent être récupérés en requêtant l'endpoint `GET https://www.rdv-insertion.fr/api/v1/departments/{number}`. Le format de réponse est détaillé au bas de cette page.\n\n## Paramètres dans le body de la requête\n\nLe schéma détaillé avec exemple se trouve en bas de page. Ci-dessous on explique à quoi correspondent les attributs des usagers:\n\n- `first_name`: STRING (requis): Prénom de l'usager\n- `last_name`: STRING (requis): Nom de l'usager\n- `title`: STRING (requis): Civilité de l'usager. Valeurs possibles: monsieur, madame.\n- `affiliation_number`: STRING (requis) : Numéro CAF de l'usager.\n- `role`: STRING (requis) : Le rôle de la personne au sein du dossier de demande RSA. Valeurs possibles: demandeur, conjoint.\n- `email`: STRING (optionnel) : L'email e l'usager. S'il n'est pas présent l'invitation par email ne sera pas envoyée.\n- `phone_number`: STRING (optionnel) : Le numéro de téléphone de l'usager. S'il n'est pas présent l'invitation par SMS ne sera pas envoyée.\n- `birth_date`: STRING (optionnel) : Date de naissance de l'usager au format DD/MM/YYYY\n- `nir` (optionnel) : NIR\n- `france_travail_id` (optionnel) : numéro d'identification France Travail\n- `rights_opening_date`: STRING (optionnel): Si l'usager est bénéficiaire du RSA, c'est la date de réception du 1er flux bénéficiaire quotidien qui montre que l'usager est un nouvel entrant). Au format DD/MM/YYYY.\n- `address`: STRING (optionnel) : L'addresse de l'usager. Cette addresse comprend le code postal et la ville.\n- `birth_name` : STRING (optionnel) : Le nom de naissance de l'usager\n- `department_internal_id`: STRING (optionnel) : ID interne de la personne au sein du système d'information du département (cela peut être l'ID lié à l'éditeur comme l'ID de IODAS par exemple). Cet ID est nécessaire si l'on veut que rdv-insertion notifie de la prise/annulation de RDV sur une API côté département ou éditeur.\n- `invitation`: OBJECT (optionnel): Contient les informations ci-dessous liées à l'invitation à prendre rdv:\n  - `rdv_solidarites_lieu_id`: INTEGER (optionnel): L'ID du lieu dans lequel l'on veut que le RDV ait lieu. S'il est précisé l'usager sera invité directement à choisir un créneau sur ce lieu. Attention, il faut faire attention à ce qu'une plage d'ouverture pour le motif en question (voir attribut précédent) relie le motif au lieu en question. Ces valeurs peuvent être récupérérés en requêtant l'endpoint `GET https://www.rdv-insertion.fr/api/v1/departments/{number}`.\n  - `motif_category: OBJECT (optionnel):\n    - `name`: STRING: Le nom de la catégorie de motif pour laquelle on veut inviter l'usager. Il peut ne pas être précisé si l'organisation ne peut inviter que sur une seule catégorie. Ces valeurs peuvent être récupérérés en requêtant l'endpoint `GET https://www.rdv-insertion.fr/api/v1/departments/{number}`.\n    - `short_name`: STRING: Alternativement au `name`, on peut préciser le nom court de la catégorie de motif pour laquelle on veut inviter l'usager. Il peut ne pas être précisé si l'organisation ne peut inviter que sur une seule catégorie. Il est présent dans la réponse de l'endpoint `GET https://www.rdv-insertion.fr/api/v1/departments/{number}`.\n- `referents_to_add`: ARRAY(optionnel):\n  - OBJECT:\n    - `email` : STRING: email du referent à ajouter à l'usager. Si l'email ne correspond à aucun agent de l'organisation la requête échoue.\n\n## Idempotence\n\nCes 2 endpoints sont idempotents, ce qui veut dire que le fait de jouer ces requêtes plusieurs fois aura le même effet que de les jouer une seule fois. Plus précisément:\n\n- Si l'usager que l'on essaie de créer est déjà présent dans l'application, il ne sera pas créé une deuxième fois. Il sera mis à jour si les attributs passés dans la requête sont changés par rapport à ce qui est enregistré en base de données.\n- On ne renverra pas d'invitation à l'usager si une invitation a déjà été envoyée à l'usager il y a moins de 24 heures.\n\n## Création et invitation asynchrone d'une liste d'usagers\n\n- `POST https://www.rdv-insertion.fr/api/v1/organisations/{rdv_solidarites_organisation_id}/users/create_and_invite_many`\n\nCet endpoint permet de créer et inviter jusqu'à **25** usagers en une seule requête. La création de la fiche usager et son invitation à prendre rendez-vous se fait de manière asynchrone. Une requête aboutissant à un succès ne signifie donc pas forcément que les usagers seront créés et invités (voir détails ci-dessous).\n\n### Réponse\n\nLors de l'envoi, nous allons vérifier que pour chaque usager les attributs requis sont présents et que tous les attributs passés sont au bon format (email, téléphone etc). Si c'est le cas la requête sera un succès. Cela ne veut pas dire que la création et l'invitation des usagers et l'invitation ont été un succès car ces actions se feront de manière asynchrone.\n\n#### En cas de succès\n\nSi la requête est un succès, nous répondrons avec un statut 200 et un body en JSON notifiant le succès de la requête (voir détails du format de réponse en bas de page).\n\n#### En cas d'échec\n\nSi la requête est un échec (voir conditions plus haut), nous répondrons avec un statut 422 et un body en JSON contenant les erreurs de la requête, avec pour chaque entrée les erreurs (voir détails du format de réponse en bas de page).\n\n### Notifications asynchrones\n\nLors du processus asynchrone de création et des invitations des usagers des erreurs peuvent avoir lieu, bien que la réponse à la requête ait été un succès. Il faut alors notifier l'organisation de ces échecs.\n\n#### En cas de problèmes à la création de l'usager\n\nEn cas d'échec de la création de l'usager, un mail sera envoyé à la personne ayant fait la requête avec l'identité de l'usager en question et les erreurs associées à sa création.\n\n![mail-notification](/api_doc/mail-notification.png)\n\n#### En cas de problèmes à l'invitation de l'usager\n\nS'il y a un problème lors de l'invitation d'un usager, l'organisation ne sera pas notifiée directement.\nPour voir si les personnes ont bien été invitées, on peut:\n\n- Aller sur l'interface web RDV-I et vérifier dans la liste que les personnes ont bien été invitées (les coches sont cochées pour chaque format d'invitation dans la liste des usagers)\n- Souscrire au webhook envoyé lorsqu'une invitation est envoyée. Les détails de ces webhooks sont explicités dans la partie webhooks ci-dessous.\n\n## Création et invitation synchrone d'un usager\n\n- `POST https://www.rdv-insertion.fr/api/v1/organisations/{rdv_solidarites_organisation_id}/users/create_and_invite`\n\nCet endpoint permet de créer et inviter un seul usager à prendre rdv. Contrairement à l'endpoint permettant d'inviter une liste d'usager, la réponse est ici synchrone: La requête est un succès que si la personne a été créée et invitée.\n\nLes formats des réponses sont spécifiés en bas de page.\n\n# Webhooks (API de notifications)\n\nrdv-insertion peut notifier des évènements ayant lieu sur l'application dans votre système d’information à l’aide de webhooks.\n\nrdv-insertion peut notifier n'importe quel système d'information accessible en ligne lors de **modifications** (création, modification, suppression) sur les **RDV** et les **invitations**.\n\nAinsi, lorsqu'un rdv est créé, modifié ou supprimé sur rdv-insertion, nous avons la possiblité de vous envoyer une requête à un endpoint de votre côté avec en payload les informations du rdv.\n\nPour cela, ce système d'informations doit :\n\n- être accessible à une URL publique et accepter des requêtes HTTP POST à cette URL\n\n## Configuration\n\nPour pouvoir configurer un endpoint prêt à recevoir les webhooks de rdv-insertion, [vous devez prendre contact avec l'équipe rdv-insertion](mailto:rdv-insertion@beta.gouv.fr) et leur donner l'URL qui les recevra et convenir d'un token `secret` partagé.\n\n## Signatures des requêtes\n\nUn **secret partagé** est associé à chacune de ces URLs pour vous permettre de vérifier que nous sommes bien à l'origine de l'envoi d'information. La requête envoyée en HTTP POST contient un entête `X-RDVI-Signature` qui contient une signature SHA256 hexadécimale du corps de la requête.\n\nPar exemple, pour vérifier que la signature vient bien de notre application, cela donnerait en `ruby` :\n\n![webhook-signature-check-example](/api_doc/webhook-signature-check-example.png)\n\n## Format des données\n\nLe payload des requêtes est envoyés sont un format JSON. Ce payload contient deux attributs:\n\n- `data` : c'est le payload de la ressource au format JSON. Les payloads de chaque ressource sont disponibles en bas de page.\n- `meta` : un objet contenant les trois attributs suivants:\n  - `model` : Le nom de la ressource que l'on envoie. Pour les rdvs elle sera égale à `Rdv`\n  - `event` : l'évènement ayant déclenché l'envoi du webhook. Il a trois valeurs possibles: `created`, `updated` et `destroyed`\n  - `timestamp` : un string représentant le moment où le webhook est envoyé.\n\n## Exemple\n\nCi-dessous un exemple de payload envoyé lorsqu'un rdv est créé:\n\n```json\n{\n  \"data\": {\n    \"id\": 325,\n    \"starts_at\": \"2023-11-14T09:00:00.000+01:00\",\n    \"duration_in_min\": 25,\n    \"cancelled_at\": null,\n    \"address\": \"Die, 26150, 26, Drôme, Auvergne-Rhône-Alpes\",\n    \"uuid\": \"2bc2393b-bf2c-47f0-9f84-e30a6b067138\",\n    \"created_by\": \"agent\",\n    \"status\": \"unknown\",\n    \"users_count\": 1,\n    \"max_participants_count\": null,\n    \"rdv_solidarites_rdv_id\": 344,\n    \"agents\": [\n      {\n        \"id\": 2,\n        \"email\": \"amine.dhobb@beta.gouv.fr\",\n        \"first_name\": \"Amine\",\n        \"last_name\": \"DHOBB\",\n        \"rdv_solidarites_agent_id\": 7\n      }\n    ],\n    \"lieu\": {\n      \"rdv_solidarites_lieu_id\": 9,\n      \"name\": \"Batiment région Rhône-Alpes\",\n      \"address\": \"Die, 26150, 26, Drôme, Auvergne-Rhône-Alpes\",\n      \"phone_number\": \"0839230303\"\n    },\n    \"motif\": {\n      \"rdv_solidarites_motif_id\": 45,\n      \"name\": \"RSA Orientation : Convocation sur site\",\n      \"collectif\": false,\n      \"location_type\": \"public_office\",\n      \"follow_up\": false,\n      \"motif_category\": {\n        \"id\": 1,\n        \"short_name\": \"rsa_orientation\",\n        \"name\": \"RSA orientation\"\n      }\n    },\n    \"users\": [\n      {\n        \"id\": 722,\n        \"uid\": \"Nzg2NzY4NyAtIGRlbWFuZGV1cg==\",\n        \"affiliation_number\": \"7867687\",\n        \"role\": \"demandeur\",\n        \"created_at\": \"2023-07-26T12:19:08.522+02:00\",\n        \"department_internal_id\": null,\n        \"first_name\": \"Andreas\",\n        \"last_name\": \"Kopke\",\n        \"title\": \"monsieur\",\n        \"address\": \"165 rue saint maur 75011 Paris\",\n        \"phone_number\": \"+33664891033\",\n        \"email\": \"remi.betagouv+demo67576567@gmail.com\",\n        \"birth_date\": \"1987-12-20\",\n        \"rights_opening_date\": null,\n        \"birth_name\": null,\n        \"rdv_solidarites_user_id\": 468,\n        \"nir\": null,\n        \"france_travail_id\": null,\n        \"carnet_de_bord_carnet_id\": null\n      }\n    ],\n    \"organisation\": {\n      \"id\": 4,\n      \"name\": \"CD de DIE\",\n      \"email\": null,\n      \"phone_number\": \"01 01 01 01 01\",\n      \"department_number\": \"26\",\n      \"rdv_solidarites_organisation_id\": 29,\n      \"motif_categories\": [\n        {\n          \"id\": 1,\n          \"short_name\": \"rsa_orientation\",\n          \"name\": \"RSA orientation\"\n        },\n        {\n          \"id\": 2,\n          \"short_name\": \"rsa_accompagnement\",\n          \"name\": \"RSA accompagnement\"\n        },\n        {\n          \"id\": 4,\n          \"short_name\": \"rsa_cer_signature\",\n          \"name\": \"RSA signature CER\"\n        },\n        {\n          \"id\": 17,\n          \"short_name\": \"psychologue\",\n          \"name\": \"Psychologue\"\n        }\n      ]\n    },\n    \"participations\": [\n      {\n        \"id\": 291,\n        \"status\": \"unknown\",\n        \"created_by\": \"agent\",\n        \"created_at\": \"2023-11-09T09:25:05.356+01:00\",\n        \"starts_at\": \"2023-11-14T09:00:00.000+01:00\",\n        \"user\": {\n          \"id\": 722,\n          \"uid\": \"Nzg2NzY4NyAtIGRlbWFuZGV1cg==\",\n          \"affiliation_number\": \"7867687\",\n          \"role\": \"demandeur\",\n          \"created_at\": \"2023-07-26T12:19:08.522+02:00\",\n          \"department_internal_id\": null,\n          \"first_name\": \"Andreas\",\n          \"last_name\": \"Kopke\",\n          \"title\": \"monsieur\",\n          \"address\": \"165 rue saint maur 75011 Paris\",\n          \"phone_number\": \"+33664891033\",\n          \"email\": \"andreas@kopke.com\",\n          \"birth_date\": \"1987-12-20\",\n          \"rights_opening_date\": null,\n          \"birth_name\": null,\n          \"rdv_solidarites_user_id\": 468,\n          \"nir\": null,\n          \"carnet_de_bord_carnet_id\": null,\n          \"france_travail_id\": null\n        }\n      }\n    ]\n  },\n  \"meta\": {\n    \"model\": \"Rdv\",\n    \"event\": \"created\",\n    \"timestamp\": \"2023-11-13 19:53:07 +0100\"\n  }\n}\n```\n"
  },
  "components": {
    "securitySchemes": {
      "access_token": {
        "type": "apiKey",
        "name": "access-token",
        "in": "header"
      },
      "uid": {
        "type": "apiKey",
        "name": "uid",
        "in": "header"
      },
      "client": {
        "type": "apiKey",
        "name": "client",
        "in": "header"
      }
    },
    "schemas": {
      "rdv": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "address": {
            "type": "string"
          },
          "agents": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/agent"
            }
          },
          "participations": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/participation"
            }
          },
          "cancelled_at": {
            "type": "string",
            "format": "date",
            "nullable": true
          },
          "collectif": {
            "type": "boolean"
          },
          "created_by": {
            "type": "string",
            "enum": [
              "agent",
              "user",
              "prescripteur"
            ]
          },
          "duration_in_min": {
            "type": "integer"
          },
          "lieu": {
            "$ref": "#/components/schemas/lieu",
            "nullable": true
          },
          "max_participants_count": {
            "type": "integer",
            "nullable": true
          },
          "motif": {
            "$ref": "#/components/schemas/motif"
          },
          "organisation": {
            "$ref": "#/components/schemas/organisation"
          },
          "starts_at": {
            "type": "string",
            "format": "date"
          },
          "status": {
            "type": "string",
            "enum": [
              "unknown",
              "seen",
              "excused",
              "revoked",
              "noshow"
            ]
          },
          "users": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/user"
            }
          },
          "users_count": {
            "type": "integer"
          },
          "uuid": {
            "type": "string"
          },
          "rdv_solidarites_rdv_id": {
            "type": "integer"
          }
        },
        "required": [
          "id",
          "starts_at",
          "duration_in_min",
          "cancelled_at",
          "address",
          "uuid",
          "created_by",
          "status",
          "users_count",
          "max_participants_count",
          "rdv_solidarites_rdv_id",
          "agents",
          "lieu",
          "motif",
          "users",
          "organisation"
        ]
      },
      "rdv_with_root": {
        "type": "object",
        "properties": {
          "rdv": {
            "$ref": "#/components/schemas/rdv"
          }
        },
        "required": [
          "rdv"
        ]
      },
      "agents": {
        "type": "object",
        "properties": {
          "agents": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/agent"
            }
          }
        },
        "required": [
          "agents"
        ]
      },
      "agent": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "email": {
            "type": "string"
          },
          "first_name": {
            "type": "string",
            "nullable": true
          },
          "last_name": {
            "type": "string",
            "nullable": true
          },
          "rdv_solidarites_agent_id": {
            "type": "integer"
          }
        },
        "required": [
          "id",
          "email",
          "first_name",
          "last_name",
          "rdv_solidarites_agent_id"
        ]
      },
      "user_with_root": {
        "type": "object",
        "properties": {
          "user": {
            "$ref": "#/components/schemas/user"
          }
        },
        "required": [
          "user"
        ]
      },
      "users": {
        "type": "object",
        "properties": {
          "users": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/user"
            }
          }
        },
        "required": [
          "users"
        ]
      },
      "user": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "address": {
            "type": "string",
            "nullable": true
          },
          "affiliation_number": {
            "type": "string",
            "nullable": true
          },
          "birth_date": {
            "type": "string",
            "format": "date",
            "nullable": true
          },
          "birth_name": {
            "type": "string",
            "nullable": true
          },
          "created_at": {
            "type": "string",
            "format": "date"
          },
          "email": {
            "type": "string",
            "nullable": true
          },
          "first_name": {
            "type": "string"
          },
          "last_name": {
            "type": "string"
          },
          "phone_number": {
            "type": "string",
            "nullable": true
          },
          "department_internal_id": {
            "type": "string",
            "nullable": true
          },
          "rights_opening_date": {
            "type": "string",
            "nullable": true
          },
          "title": {
            "type": "string",
            "enum": [
              "monsieur",
              "madame"
            ]
          },
          "uid": {
            "type": "string",
            "nullable": true
          },
          "role": {
            "type": "string",
            "nullable": true,
            "enum": [
              "demandeur",
              "conjoint"
            ]
          },
          "nir": {
            "type": "string",
            "nullable": true
          },
          "france_travail_id": {
            "type": "string",
            "nullable": true
          },
          "carnet_de_bord_carnet_id": {
            "type": "string",
            "nullable": true
          },
          "rdv_solidarites_user_id": {
            "type": "integer"
          }
        },
        "required": [
          "id",
          "uid",
          "affiliation_number",
          "role",
          "created_at",
          "department_internal_id",
          "first_name",
          "last_name",
          "title",
          "address",
          "phone_number",
          "email",
          "birth_date",
          "rights_opening_date",
          "birth_name",
          "rdv_solidarites_user_id",
          "nir",
          "france_travail_id",
          "carnet_de_bord_carnet_id"
        ]
      },
      "user_with_referents": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "address": {
            "type": "string",
            "nullable": true
          },
          "affiliation_number": {
            "type": "string",
            "nullable": true
          },
          "birth_date": {
            "type": "string",
            "format": "date",
            "nullable": true
          },
          "birth_name": {
            "type": "string",
            "nullable": true
          },
          "created_at": {
            "type": "string",
            "format": "date"
          },
          "email": {
            "type": "string",
            "nullable": true
          },
          "first_name": {
            "type": "string"
          },
          "last_name": {
            "type": "string"
          },
          "phone_number": {
            "type": "string",
            "nullable": true
          },
          "department_internal_id": {
            "type": "string",
            "nullable": true,
            "description": "Présent seulement pour les organisations de type: conseil départemental, délégataire RSA et France Travail"
          },
          "rights_opening_date": {
            "type": "string",
            "nullable": true
          },
          "title": {
            "type": "string",
            "enum": [
              "monsieur",
              "madame"
            ]
          },
          "uid": {
            "type": "string",
            "nullable": true
          },
          "role": {
            "type": "string",
            "nullable": true,
            "enum": [
              "demandeur",
              "conjoint"
            ]
          },
          "nir": {
            "type": "string",
            "nullable": true,
            "description": "Présent seulement pour les organisations de type: conseil départemental, France Travail."
          },
          "france_travail_id": {
            "type": "string",
            "nullable": true
          },
          "carnet_de_bord_carnet_id": {
            "type": "string",
            "nullable": true
          },
          "rdv_solidarites_user_id": {
            "type": "integer"
          },
          "referents": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/agent"
            }
          }
        },
        "required": [
          "id",
          "uid",
          "affiliation_number",
          "role",
          "created_at",
          "department_internal_id",
          "first_name",
          "last_name",
          "title",
          "address",
          "phone_number",
          "email",
          "birth_date",
          "rights_opening_date",
          "birth_name",
          "rdv_solidarites_user_id",
          "nir",
          "france_travail_id",
          "carnet_de_bord_carnet_id"
        ]
      },
      "user_with_referents_for_delegataire_rsa": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "address": {
            "type": "string",
            "nullable": true
          },
          "affiliation_number": {
            "type": "string",
            "nullable": true
          },
          "birth_date": {
            "type": "string",
            "format": "date",
            "nullable": true
          },
          "birth_name": {
            "type": "string",
            "nullable": true
          },
          "created_at": {
            "type": "string",
            "format": "date"
          },
          "email": {
            "type": "string",
            "nullable": true
          },
          "first_name": {
            "type": "string"
          },
          "last_name": {
            "type": "string"
          },
          "phone_number": {
            "type": "string",
            "nullable": true
          },
          "department_internal_id": {
            "type": "string",
            "nullable": true
          },
          "rights_opening_date": {
            "type": "string",
            "nullable": true
          },
          "title": {
            "type": "string",
            "enum": [
              "monsieur",
              "madame"
            ]
          },
          "uid": {
            "type": "string",
            "nullable": true
          },
          "role": {
            "type": "string",
            "nullable": true,
            "enum": [
              "demandeur",
              "conjoint"
            ]
          },
          "france_travail_id": {
            "type": "string",
            "nullable": true
          },
          "carnet_de_bord_carnet_id": {
            "type": "string",
            "nullable": true
          },
          "rdv_solidarites_user_id": {
            "type": "integer"
          },
          "referents": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/agent"
            }
          }
        },
        "required": [
          "id",
          "uid",
          "affiliation_number",
          "role",
          "created_at",
          "department_internal_id",
          "first_name",
          "last_name",
          "title",
          "address",
          "phone_number",
          "email",
          "birth_date",
          "rights_opening_date",
          "birth_name",
          "rdv_solidarites_user_id",
          "france_travail_id",
          "carnet_de_bord_carnet_id"
        ]
      },
      "user_with_referents_for_siae": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "address": {
            "type": "string",
            "nullable": true
          },
          "affiliation_number": {
            "type": "string",
            "nullable": true
          },
          "birth_date": {
            "type": "string",
            "format": "date",
            "nullable": true
          },
          "birth_name": {
            "type": "string",
            "nullable": true
          },
          "created_at": {
            "type": "string",
            "format": "date"
          },
          "email": {
            "type": "string",
            "nullable": true
          },
          "first_name": {
            "type": "string"
          },
          "last_name": {
            "type": "string"
          },
          "phone_number": {
            "type": "string",
            "nullable": true
          },
          "rights_opening_date": {
            "type": "string",
            "nullable": true
          },
          "title": {
            "type": "string",
            "enum": [
              "monsieur",
              "madame"
            ]
          },
          "uid": {
            "type": "string",
            "nullable": true
          },
          "role": {
            "type": "string",
            "nullable": true,
            "enum": [
              "demandeur",
              "conjoint"
            ]
          },
          "france_travail_id": {
            "type": "string",
            "nullable": true
          },
          "carnet_de_bord_carnet_id": {
            "type": "string",
            "nullable": true
          },
          "rdv_solidarites_user_id": {
            "type": "integer"
          },
          "referents": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/agent"
            }
          }
        },
        "required": [
          "id",
          "uid",
          "affiliation_number",
          "role",
          "created_at",
          "first_name",
          "last_name",
          "title",
          "address",
          "phone_number",
          "email",
          "birth_date",
          "rights_opening_date",
          "birth_name",
          "rdv_solidarites_user_id",
          "france_travail_id",
          "carnet_de_bord_carnet_id"
        ]
      },
      "user_with_referents_for_autre": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "address": {
            "type": "string",
            "nullable": true
          },
          "affiliation_number": {
            "type": "string",
            "nullable": true
          },
          "birth_date": {
            "type": "string",
            "format": "date",
            "nullable": true
          },
          "birth_name": {
            "type": "string",
            "nullable": true
          },
          "created_at": {
            "type": "string",
            "format": "date"
          },
          "email": {
            "type": "string",
            "nullable": true
          },
          "first_name": {
            "type": "string"
          },
          "last_name": {
            "type": "string"
          },
          "phone_number": {
            "type": "string",
            "nullable": true
          },
          "rights_opening_date": {
            "type": "string",
            "nullable": true
          },
          "title": {
            "type": "string",
            "enum": [
              "monsieur",
              "madame"
            ]
          },
          "uid": {
            "type": "string",
            "nullable": true
          },
          "role": {
            "type": "string",
            "nullable": true,
            "enum": [
              "demandeur",
              "conjoint"
            ]
          },
          "france_travail_id": {
            "type": "string",
            "nullable": true
          },
          "carnet_de_bord_carnet_id": {
            "type": "string",
            "nullable": true
          },
          "rdv_solidarites_user_id": {
            "type": "integer"
          },
          "referents": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/agent"
            }
          }
        },
        "required": [
          "id",
          "uid",
          "affiliation_number",
          "role",
          "created_at",
          "first_name",
          "last_name",
          "title",
          "address",
          "phone_number",
          "email",
          "birth_date",
          "rights_opening_date",
          "birth_name",
          "rdv_solidarites_user_id",
          "france_travail_id",
          "carnet_de_bord_carnet_id"
        ]
      },
      "user_params": {
        "type": "object",
        "properties": {
          "address": {
            "type": "string",
            "nullable": true
          },
          "affiliation_number": {
            "type": "string",
            "nullable": true
          },
          "birth_date": {
            "type": "string",
            "format": "date",
            "nullable": true
          },
          "birth_name": {
            "type": "string",
            "nullable": true
          },
          "email": {
            "type": "string",
            "nullable": true
          },
          "first_name": {
            "type": "string"
          },
          "last_name": {
            "type": "string"
          },
          "phone_number": {
            "type": "string",
            "nullable": true
          },
          "department_internal_id": {
            "type": "string",
            "nullable": true,
            "description": "Affectable seulement dans les organisations de type: conseil départemental, délégataire RSA et France Travail"
          },
          "rights_opening_date": {
            "type": "string",
            "nullable": true
          },
          "title": {
            "type": "string",
            "enum": [
              "monsieur",
              "madame"
            ]
          },
          "role": {
            "type": "string",
            "nullable": true,
            "enum": [
              "demandeur",
              "conjoint"
            ]
          },
          "nir": {
            "type": "string",
            "nullable": true,
            "description": "Affectable seulement dans les organisations de type: conseil départemental, France Travail"
          },
          "france_travail_id": {
            "type": "string",
            "nullable": true
          },
          "carnet_de_bord_carnet_id": {
            "type": "string",
            "nullable": true
          },
          "invitation": {
            "type": "object",
            "properties": {
              "rdv_solidarites_lieu_id": {
                "type": "string"
              },
              "motif_category": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "nullable": true
                  },
                  "short_name": {
                    "type": "string",
                    "nullable": true
                  }
                }
              }
            }
          },
          "referents_to_add": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "email": {
                  "type": "string"
                }
              }
            }
          },
          "required": [
            "first_name",
            "last_name",
            "title"
          ]
        }
      },
      "organisation_with_root": {
        "type": "object",
        "properties": {
          "organisation": {
            "$ref": "#/components/schemas/organisation"
          }
        },
        "required": [
          "organisation"
        ]
      },
      "organisations": {
        "type": "object",
        "properties": {
          "organisations": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/organisation"
            }
          }
        },
        "required": [
          "organisations"
        ]
      },
      "organisation": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "email": {
            "type": "string",
            "nullable": true
          },
          "name": {
            "type": "string"
          },
          "phone_number": {
            "type": "string"
          },
          "department_number": {
            "type": "string"
          },
          "rdv_solidarites_organisation_id": {
            "type": "integer"
          },
          "motif_categories": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/motif_category"
            }
          }
        },
        "required": [
          "id",
          "name",
          "email",
          "phone_number",
          "department_number",
          "rdv_solidarites_organisation_id",
          "motif_categories"
        ]
      },
      "follow_up": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "status": {
            "type": "string"
          },
          "human_status": {
            "type": "string"
          },
          "motif_category_id": {
            "type": "integer"
          },
          "participations": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/participation"
            }
          }
        }
      },
      "participation": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "status": {
            "type": "string",
            "enum": [
              "unknown",
              "seen",
              "excused",
              "revoked",
              "noshow"
            ]
          },
          "created_by": {
            "type": "string",
            "enum": [
              "agent",
              "user",
              "prescripteur"
            ]
          },
          "created_at": {
            "type": "string",
            "format": "date"
          },
          "user": {
            "$ref": "#/components/schemas/user"
          }
        },
        "required": [
          "status",
          "created_by",
          "created_at"
        ]
      },
      "invitations": {
        "type": "object",
        "properties": {
          "invitations": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/invitation"
            }
          }
        },
        "required": [
          "invitations"
        ]
      },
      "invitation": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "format": {
            "type": "string",
            "enum": [
              "sms",
              "postal",
              "email"
            ]
          },
          "clicked": {
            "type": "boolean"
          },
          "rdv_with_referents": {
            "type": "boolean"
          },
          "created_at": {
            "type": "string"
          },
          "motif_category": {
            "$ref": "#/components/schemas/motif_category"
          },
          "delivery_status": {
            "type": "string",
            "enum": [
              "soft_bounce",
              "hard_bounce",
              "blocked",
              "invalid_email",
              "error",
              "delivered"
            ],
            "nullable": true
          },
          "delivered_at": {
            "type": "string",
            "format": "date",
            "nullable": true
          },
          "expires_at": {
            "type": "string",
            "format": "date"
          }
        },
        "required": [
          "id",
          "format",
          "clicked",
          "rdv_with_referents",
          "created_at",
          "motif_category"
        ]
      },
      "lieu": {
        "type": "object",
        "properties": {
          "address": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "phone_number": {
            "type": "string",
            "nullable": true
          },
          "rdv_solidarites_lieu_id": {
            "type": "integer"
          }
        },
        "required": [
          "address",
          "name",
          "phone_number",
          "rdv_solidarites_lieu_id"
        ]
      },
      "motifs": {
        "type": "object",
        "properties": {
          "motifs": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/motif"
            }
          }
        },
        "required": [
          "motifs"
        ]
      },
      "motif": {
        "type": "object",
        "properties": {
          "rdv_solidarites_motif_id": {
            "type": "integer"
          },
          "location_type": {
            "type": "string",
            "enum": [
              "public_office",
              "phone",
              "home"
            ]
          },
          "name": {
            "type": "string"
          },
          "motif_category": {
            "$ref": "#/components/schemas/motif_category"
          },
          "collectif": {
            "type": "boolean"
          },
          "follow_up": {
            "type": "boolean"
          }
        },
        "required": [
          "rdv_solidarites_motif_id",
          "name",
          "collectif",
          "location_type",
          "follow_up",
          "motif_category"
        ]
      },
      "motif_category": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "name": {
            "type": "string"
          },
          "short_name": {
            "type": "string"
          }
        },
        "required": [
          "id",
          "name",
          "short_name"
        ]
      },
      "department": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "number": {
            "type": "string"
          },
          "capital": {
            "type": "string"
          },
          "region": {
            "type": "string"
          },
          "organisations": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/organisation",
              "lieux": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/lieu"
                }
              },
              "motifs": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/motif"
                }
              }
            }
          }
        },
        "required": [
          "id",
          "number",
          "capital",
          "region",
          "organisations"
        ]
      },
      "department_with_root": {
        "type": "object",
        "properties": {
          "department": {
            "$ref": "#/components/schemas/department"
          }
        },
        "required": [
          "department"
        ]
      },
      "success_response": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          }
        }
      },
      "error_unprocessable_entity": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "errors": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "error_details": {
                  "type": "string"
                }
              },
              "required": [
                "error_details"
              ]
            }
          },
          "required": [
            "errors"
          ]
        }
      },
      "error_authentication": {
        "type": "object",
        "properties": {
          "errors": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "errors"
        ]
      },
      "error_forbidden": {
        "type": "object",
        "properties": {
          "errors": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "errors"
        ]
      },
      "error_not_found": {
        "type": "object",
        "properties": {
          "not_found": {
            "type": "string"
          }
        },
        "required": [
          "not_found"
        ]
      }
    }
  },
  "servers": [
    {
      "url": "http://localhost:8000/",
      "description": "Serveur de développement"
    },
    {
      "url": "https://www.rdv-insertion-demo.fr",
      "description": "Serveur de démo"
    },
    {
      "url": "https://www.rdv-insertion.fr",
      "description": "Serveur de production"
    }
  ],
  "paths": {
    "api/v1/departments/{number}": {
      "get": {
        "summary": "Retrieves a department",
        "tags": [
          "Departement"
        ],
        "description": "Renvoie les organisations, lieux et motifs du département",
        "parameters": [
          {
            "name": "number",
            "in": "path",
            "description": "Le numéro de département",
            "example": "13",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "amine.dhobb@beta.gouv.fr",
            "schema": {
              "type": "string"
            }
          }
        ],
        "security": [
          {
            "access_token": [],
            "uid": [],
            "client": []
          }
        ],
        "responses": {
          "200": {
            "description": "succès",
            "content": {
              "application/json": {
                "examples": {
                  "succès": {
                    "value": {
                      "department": {
                        "id": 1,
                        "number": "13",
                        "capital": "Marseille",
                        "region": "Provence-Alpes-Côte d'Azur",
                        "carnet_de_bord_deploiement_id": null,
                        "organisations": [
                          {
                            "id": 2,
                            "name": "Pôle Parcours",
                            "email": "pole-parcours@departement13.fr",
                            "phone_number": "0101010101",
                            "department_number": "13",
                            "rdv_solidarites_organisation_id": 5798115184,
                            "department_id": 1,
                            "motif_categories": [
                              {
                                "id": 1,
                                "short_name": "rsa_orientation",
                                "name": "RSA orientation"
                              }
                            ],
                            "motifs": [
                              {
                                "rdv_solidarites_motif_id": 47384,
                                "name": "RSA orientation sur site",
                                "collectif": false,
                                "location_type": "public_office",
                                "follow_up": false,
                                "motif_category": {
                                  "id": 1,
                                  "short_name": "rsa_orientation",
                                  "name": "RSA orientation"
                                }
                              }
                            ],
                            "lieux": [
                              {
                                "rdv_solidarites_lieu_id": 47384,
                                "name": "DINUM",
                                "address": "20 avenue de Ségur 75007 Paris",
                                "phone_number": null
                              }
                            ]
                          }
                        ]
                      }
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/department_with_root"
                }
              }
            }
          },
          "403": {
            "description": "Renvoie 'forbidden' quand l'agent n'a pas les droits pour effectuer cette action",
            "content": {
              "application/json": {
                "examples": {
                  "Renvoie 'forbidden' quand l'agent n'a pas les droits pour effectuer cette action": {
                    "value": {
                      "errors": [
                        "Votre compte ne vous permet pas d'effectuer cette action"
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_forbidden"
                }
              }
            }
          },
          "401": {
            "description": "Renvoie 'unauthorized' quand l'authentification est impossible",
            "content": {
              "application/json": {
                "examples": {
                  "Renvoie 'unauthorized' quand l'authentification est impossible": {
                    "value": {
                      "errors": [
                        "Les identifiants de session RDV-Solidarités sont invalides"
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_authentication"
                }
              }
            }
          },
          "404": {
            "description": "Renvoie 'not_found' quand le rdv n'existe pas",
            "content": {
              "application/json": {
                "examples": {
                  "Renvoie 'not_found' quand le rdv n'existe pas": {
                    "value": {
                      "not_found": "Department"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_not_found"
                }
              }
            }
          }
        }
      }
    },
    "api/v1/rdvs/{uuid}": {
      "get": {
        "summary": "Retrieves a rdv",
        "tags": [
          "Rdv"
        ],
        "description": "Renvoie les détails du rdv",
        "parameters": [
          {
            "name": "uuid",
            "in": "path",
            "description": "L'uuid d'un rdv",
            "example": "c5097fb5-4f79-4ef4-b723-f295d888fd98",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "amine.dhobb@beta.gouv.fr",
            "schema": {
              "type": "string"
            }
          }
        ],
        "security": [
          {
            "access_token": [],
            "uid": [],
            "client": []
          }
        ],
        "responses": {
          "200": {
            "description": "Renvoie le rdv",
            "content": {
              "application/json": {
                "examples": {
                  "Renvoie le rdv": {
                    "value": {
                      "rdv": {
                        "id": 2,
                        "starts_at": "2025-02-21T14:51:42.419+01:00",
                        "duration_in_min": 30,
                        "cancelled_at": null,
                        "address": "2O avenue de Ségur, 75007 Paris",
                        "uuid": "1aecb267-f047-45da-b629-3740a9a769cf",
                        "created_by": "user",
                        "status": "unknown",
                        "users_count": 0,
                        "max_participants_count": null,
                        "rdv_solidarites_rdv_id": 47387,
                        "agents": [
                          {
                            "id": 13,
                            "email": "agent47422@gouv.fr",
                            "first_name": "jane39",
                            "last_name": "doe39",
                            "rdv_solidarites_agent_id": 6666611730
                          }
                        ],
                        "lieu": {
                          "rdv_solidarites_lieu_id": 47391,
                          "name": "DINUM",
                          "address": "20 avenue de Ségur 75007 Paris",
                          "phone_number": null
                        },
                        "motif": {
                          "rdv_solidarites_motif_id": 47390,
                          "name": "RSA orientation sur site",
                          "collectif": false,
                          "location_type": "public_office",
                          "follow_up": false,
                          "motif_category": {
                            "id": 1,
                            "short_name": "rsa_orientation",
                            "name": "RSA orientation"
                          }
                        },
                        "users": [
                          {
                            "id": 1,
                            "uid": "bnVtZXJvXzQ3Mzg4IC0gZGVtYW5kZXVy",
                            "affiliation_number": "numero_47388",
                            "role": "demandeur",
                            "created_at": "0024-12-02T22:22:00.000+00:09",
                            "department_internal_id": "4579",
                            "first_name": "john47388",
                            "last_name": "doe47388",
                            "title": "monsieur",
                            "address": "27 avenue de Ségur 75007 Paris",
                            "phone_number": "+33782605941",
                            "email": "johndoe47388@yahoo.fr",
                            "birth_date": null,
                            "rights_opening_date": null,
                            "birth_name": null,
                            "rdv_solidarites_user_id": 47388,
                            "nir": null,
                            "carnet_de_bord_carnet_id": null,
                            "france_travail_id": null
                          }
                        ],
                        "organisation": {
                          "id": 3,
                          "name": "Organisation n°47401",
                          "email": "organisation47401@rdv-insertion.fr",
                          "phone_number": "0101010101",
                          "department_number": "18",
                          "rdv_solidarites_organisation_id": 3076872707,
                          "department_id": 3,
                          "motif_categories": [
                            {
                              "id": 1,
                              "short_name": "rsa_orientation",
                              "name": "RSA orientation"
                            }
                          ]
                        },
                        "participations": [
                          {
                            "id": 2,
                            "status": "unknown",
                            "created_by": "user",
                            "created_at": "2025-02-18T14:51:42.417+01:00",
                            "starts_at": "2025-02-21T14:51:42.419+01:00",
                            "user": {
                              "id": 1,
                              "uid": "bnVtZXJvXzQ3Mzg4IC0gZGVtYW5kZXVy",
                              "affiliation_number": "numero_47388",
                              "role": "demandeur",
                              "created_at": "0024-12-02T22:22:00.000+00:09",
                              "department_internal_id": "4579",
                              "first_name": "john47388",
                              "last_name": "doe47388",
                              "title": "monsieur",
                              "address": "27 avenue de Ségur 75007 Paris",
                              "phone_number": "+33782605941",
                              "email": "johndoe47388@yahoo.fr",
                              "birth_date": null,
                              "rights_opening_date": null,
                              "birth_name": null,
                              "rdv_solidarites_user_id": 47388,
                              "nir": null,
                              "carnet_de_bord_carnet_id": null,
                              "france_travail_id": null
                            }
                          }
                        ]
                      }
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/rdv_with_root"
                }
              }
            }
          },
          "403": {
            "description": "Renvoie 'forbidden' quand l'agent n'a pas les droits pour effectuer cette action",
            "content": {
              "application/json": {
                "examples": {
                  "Renvoie 'forbidden' quand l'agent n'a pas les droits pour effectuer cette action": {
                    "value": {
                      "errors": [
                        "Votre compte ne vous permet pas d'effectuer cette action"
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_forbidden"
                }
              }
            }
          },
          "401": {
            "description": "Renvoie 'unauthorized' quand l'authentification est impossible",
            "content": {
              "application/json": {
                "examples": {
                  "Renvoie 'unauthorized' quand l'authentification est impossible": {
                    "value": {
                      "errors": [
                        "Les identifiants de session RDV-Solidarités sont invalides"
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_authentication"
                }
              }
            }
          },
          "404": {
            "description": "Renvoie 'not_found' quand le rdv n'existe pas",
            "content": {
              "application/json": {
                "examples": {
                  "Renvoie 'not_found' quand le rdv n'existe pas": {
                    "value": {
                      "not_found": "Rdv"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_not_found"
                }
              }
            }
          }
        }
      }
    },
    "api/v1/organisations/{rdv_solidarites_organisation_id}/users/create_and_invite_many": {
      "post": {
        "summary": "create and invite users",
        "tags": [
          "User"
        ],
        "description": "Créé et invite une liste d'usagers à prendre rdv.\n      La création et l'invitation se font de manière asynchrone.",
        "parameters": [
          {
            "name": "rdv_solidarites_organisation_id",
            "in": "path",
            "description": "L'id rdv-solidarites d'une organisation",
            "example": "403023",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "amine.dhobb@beta.gouv.fr",
            "schema": {
              "type": "string"
            }
          }
        ],
        "security": [
          {
            "access_token": [],
            "uid": [],
            "client": []
          }
        ],
        "responses": {
          "200": {
            "description": "succès",
            "content": {
              "application/json": {
                "examples": {
                  "succès": {
                    "value": {
                      "success": true
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/success_response"
                }
              }
            }
          },
          "403": {
            "description": "Renvoie 'forbidden' quand l'agent n'a pas les droits pour effectuer cette action",
            "content": {
              "application/json": {
                "examples": {
                  "Renvoie 'forbidden' quand l'agent n'a pas les droits pour effectuer cette action": {
                    "value": {
                      "errors": [
                        "Votre compte ne vous permet pas d'effectuer cette action"
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_forbidden"
                }
              }
            }
          },
          "401": {
            "description": "Renvoie 'unauthorized' quand l'authentification est impossible",
            "content": {
              "application/json": {
                "examples": {
                  "Renvoie 'unauthorized' quand l'authentification est impossible": {
                    "value": {
                      "errors": [
                        "Les identifiants de session RDV-Solidarités sont invalides"
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_authentication"
                }
              }
            }
          },
          "404": {
            "description": "Renvoie 'not_found' quand l'organisation n'existe pas",
            "content": {
              "application/json": {
                "examples": {
                  "Renvoie 'not_found' quand l'organisation n'existe pas": {
                    "value": {
                      "not_found": "Organisation"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_not_found"
                }
              }
            }
          },
          "422": {
            "description": "Renvoie 'unprocessable_entity' quand quand l'adresse mail du réferent ne correspond à aucun agent enregistré",
            "content": {
              "application/json": {
                "examples": {
                  "Renvoie 'unprocessable_entity' quand quand les paramètres sont incomplets": {
                    "value": {
                      "success": false,
                      "errors": [
                        {
                          "error_details": "Prénom doit être rempli(e)",
                          "first_name": "",
                          "last_name": "Drogba",
                          "index": 0
                        }
                      ]
                    }
                  },
                  "Renvoie 'unprocessable_entity' quand quand les paramètres sont invalide": {
                    "value": {
                      "success": false,
                      "errors": [
                        {
                          "error_details": "Email n'est pas valide",
                          "first_name": "Didier",
                          "last_name": "Drogba",
                          "index": 0
                        }
                      ]
                    }
                  },
                  "Renvoie 'unprocessable_entity' quand quand + de 25 usagers sont envoyés": {
                    "value": {
                      "success": false,
                      "errors": [
                        {
                          "error_details": "Les usagers doivent être envoyés par lots de 25 maximum"
                        }
                      ]
                    }
                  },
                  "Renvoie 'unprocessable_entity' quand quand l'adresse mail du réferent ne correspond à aucun agent enregistré": {
                    "value": {
                      "success": false,
                      "errors": [
                        {
                          "error_details": "Assignation du référent impossible car aucun agent n'a été retrouvé avec l'adresse agentnontrouve@nomdedomaine.fr au sein de l'organisation Organisation n°47447. ",
                          "index": 0
                        }
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_unprocessable_entity"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "users": {
                    "type": "array",
                    "items": {
                      "$ref": "#/components/schemas/user_params"
                    }
                  },
                  "required": [
                    "users"
                  ]
                }
              },
              "examples": {
                "succes": {
                  "summary": "succès",
                  "value": {
                    "users": [
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180441334211573",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Dimitri",
                        "last_name": "Payet",
                        "title": "monsieur",
                        "affiliation_number": "0782605941",
                        "role": "conjoint",
                        "email": "amine.dhobb+testapi2@gmail.com",
                        "phone_number": "0782605941",
                        "birth_date": "29/03/1980",
                        "birth_name": "AutreNom",
                        "rights_opening_date": "15/11/2021",
                        "address": "5 Avenue du Moulin des Baux, 13260 Cassis",
                        "department_internal_id": "22221111",
                        "france_travail_id": "22233333",
                        "nir": "180786112714518",
                        "invitation": {
                          "motif_category": {
                            "name": "RSA orientation"
                          }
                        }
                      }
                    ]
                  }
                },
                "renvoie_forbidden_quand_l_agent_n_a_pas_les_droits_pour_effectuer_cette_action": {
                  "summary": "Renvoie 'forbidden' quand l'agent n'a pas les droits pour effectuer cette action",
                  "value": {
                    "users": [
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180695927811881",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Dimitri",
                        "last_name": "Payet",
                        "title": "monsieur",
                        "affiliation_number": "0782605941",
                        "role": "conjoint",
                        "email": "amine.dhobb+testapi2@gmail.com",
                        "phone_number": "0782605941",
                        "birth_date": "29/03/1980",
                        "birth_name": "AutreNom",
                        "rights_opening_date": "15/11/2021",
                        "address": "5 Avenue du Moulin des Baux, 13260 Cassis",
                        "department_internal_id": "22221111",
                        "france_travail_id": "22233333",
                        "nir": "180614371931256",
                        "invitation": {
                          "motif_category": {
                            "name": "RSA orientation"
                          }
                        }
                      }
                    ]
                  }
                },
                "renvoie_unauthorized_quand_l_authentification_est_impossible": {
                  "summary": "Renvoie 'unauthorized' quand l'authentification est impossible",
                  "value": {
                    "users": [
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180525521941928",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Dimitri",
                        "last_name": "Payet",
                        "title": "monsieur",
                        "affiliation_number": "0782605941",
                        "role": "conjoint",
                        "email": "amine.dhobb+testapi2@gmail.com",
                        "phone_number": "0782605941",
                        "birth_date": "29/03/1980",
                        "birth_name": "AutreNom",
                        "rights_opening_date": "15/11/2021",
                        "address": "5 Avenue du Moulin des Baux, 13260 Cassis",
                        "department_internal_id": "22221111",
                        "france_travail_id": "22233333",
                        "nir": "180433322435108",
                        "invitation": {
                          "motif_category": {
                            "name": "RSA orientation"
                          }
                        }
                      }
                    ]
                  }
                },
                "renvoie_not_found_quand_l_organisation_n_existe_pas": {
                  "summary": "Renvoie 'not_found' quand l'organisation n'existe pas",
                  "value": {
                    "users": [
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180927655843701",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Dimitri",
                        "last_name": "Payet",
                        "title": "monsieur",
                        "affiliation_number": "0782605941",
                        "role": "conjoint",
                        "email": "amine.dhobb+testapi2@gmail.com",
                        "phone_number": "0782605941",
                        "birth_date": "29/03/1980",
                        "birth_name": "AutreNom",
                        "rights_opening_date": "15/11/2021",
                        "address": "5 Avenue du Moulin des Baux, 13260 Cassis",
                        "department_internal_id": "22221111",
                        "france_travail_id": "22233333",
                        "nir": "180295973425181",
                        "invitation": {
                          "motif_category": {
                            "name": "RSA orientation"
                          }
                        }
                      }
                    ]
                  }
                },
                "renvoie_unprocessable_entity_quand_quand_les_parametres_sont_incomplets": {
                  "summary": "Renvoie 'unprocessable_entity' quand quand les paramètres sont incomplets",
                  "value": {
                    "users": [
                      {
                        "first_name": "",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180573127253322",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Dimitri",
                        "last_name": "Payet",
                        "title": "monsieur",
                        "affiliation_number": "0782605941",
                        "role": "conjoint",
                        "email": "amine.dhobb+testapi2@gmail.com",
                        "phone_number": "0782605941",
                        "birth_date": "29/03/1980",
                        "birth_name": "AutreNom",
                        "rights_opening_date": "15/11/2021",
                        "address": "5 Avenue du Moulin des Baux, 13260 Cassis",
                        "department_internal_id": "22221111",
                        "france_travail_id": "22233333",
                        "nir": "180177391321792",
                        "invitation": {
                          "motif_category": {
                            "name": "RSA orientation"
                          }
                        }
                      }
                    ]
                  }
                },
                "renvoie_unprocessable_entity_quand_quand_les_parametres_sont_invalide": {
                  "summary": "Renvoie 'unprocessable_entity' quand quand les paramètres sont invalide",
                  "value": {
                    "users": [
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "invalid@email",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180445823353262",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Dimitri",
                        "last_name": "Payet",
                        "title": "monsieur",
                        "affiliation_number": "0782605941",
                        "role": "conjoint",
                        "email": "amine.dhobb+testapi2@gmail.com",
                        "phone_number": "0782605941",
                        "birth_date": "29/03/1980",
                        "birth_name": "AutreNom",
                        "rights_opening_date": "15/11/2021",
                        "address": "5 Avenue du Moulin des Baux, 13260 Cassis",
                        "department_internal_id": "22221111",
                        "france_travail_id": "22233333",
                        "nir": "180352256416953",
                        "invitation": {
                          "motif_category": {
                            "name": "RSA orientation"
                          }
                        }
                      }
                    ]
                  }
                },
                "renvoie_unprocessable_entity_quand_quand_de_25_usagers_sont_envoyes": {
                  "summary": "Renvoie 'unprocessable_entity' quand quand + de 25 usagers sont envoyés",
                  "value": {
                    "users": [
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180795958938454",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180795958938454",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180795958938454",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180795958938454",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180795958938454",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180795958938454",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180795958938454",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180795958938454",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180795958938454",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180795958938454",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180795958938454",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180795958938454",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180795958938454",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180795958938454",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180795958938454",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180795958938454",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180795958938454",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180795958938454",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180795958938454",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180795958938454",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180795958938454",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180795958938454",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180795958938454",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180795958938454",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180795958938454",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180795958938454",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180795958938454",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180795958938454",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180795958938454",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180795958938454",
                        "referents_to_add": [
                          {
                            "email": "agentreferent@nomdedomaine.fr"
                          }
                        ]
                      }
                    ]
                  }
                },
                "renvoie_unprocessable_entity_quand_quand_l_adresse_mail_du_referent_ne_correspond_a_aucun_agent_enregistre": {
                  "summary": "Renvoie 'unprocessable_entity' quand quand l'adresse mail du réferent ne correspond à aucun agent enregistré",
                  "value": {
                    "users": [
                      {
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "affiliation_number": "10492390",
                        "role": "demandeur",
                        "email": "didier@drogba.com",
                        "phone_number": "0782605941",
                        "birth_date": "11/03/1980",
                        "birth_name": null,
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "department_internal_id": "11111444",
                        "nir": "180939259262229",
                        "referents_to_add": [
                          {
                            "email": "agentnontrouve@nomdedomaine.fr"
                          }
                        ]
                      },
                      {
                        "first_name": "Dimitri",
                        "last_name": "Payet",
                        "title": "monsieur",
                        "affiliation_number": "0782605941",
                        "role": "conjoint",
                        "email": "amine.dhobb+testapi2@gmail.com",
                        "phone_number": "0782605941",
                        "birth_date": "29/03/1980",
                        "birth_name": "AutreNom",
                        "rights_opening_date": "15/11/2021",
                        "address": "5 Avenue du Moulin des Baux, 13260 Cassis",
                        "department_internal_id": "22221111",
                        "france_travail_id": "22233333",
                        "nir": "180661892873337",
                        "invitation": {
                          "motif_category": {
                            "name": "RSA orientation"
                          }
                        }
                      }
                    ]
                  }
                }
              }
            }
          },
          "required": true
        }
      }
    },
    "api/v1/organisations/{rdv_solidarites_organisation_id}/users/create_and_invite": {
      "parameters": [
        {
          "name": "rdv_solidarites_organisation_id",
          "in": "path",
          "description": "L'id rdv-solidarites d'une organisation",
          "example": "403023",
          "required": true,
          "schema": {
            "type": "string"
          }
        }
      ],
      "post": {
        "summary": "create and invite user",
        "tags": [
          "User"
        ],
        "description": "Créé et invite une liste d'usagers à prendre rdv.\n      La création et l'invitation se font de manière synchrone.",
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "amine.dhobb@beta.gouv.fr",
            "schema": {
              "type": "string"
            }
          }
        ],
        "security": [
          {
            "access_token": [],
            "uid": [],
            "client": []
          }
        ],
        "responses": {
          "200": {
            "description": "succès",
            "content": {
              "application/json": {
                "examples": {
                  "succès": {
                    "value": {
                      "success": true,
                      "user": {
                        "id": 1,
                        "uid": "MTA0OTIzOSAtIGRlbWFuZGV1cg==",
                        "affiliation_number": "1049239",
                        "role": "demandeur",
                        "created_at": "0024-12-02T22:22:00.000+00:09",
                        "department_internal_id": "11111444",
                        "first_name": "Didier",
                        "last_name": "Drogba",
                        "title": "monsieur",
                        "address": "13 rue de la République 13001 MARSEILLE",
                        "phone_number": "+33782605941",
                        "email": "didier@drogba.com",
                        "birth_date": "1980-03-11",
                        "rights_opening_date": null,
                        "birth_name": null,
                        "rdv_solidarites_user_id": 47403,
                        "nir": "180468432678931",
                        "carnet_de_bord_carnet_id": null,
                        "france_travail_id": null,
                        "referents": [
                          {
                            "id": 2,
                            "email": "agentreferent@nomdedomaine.fr",
                            "first_name": "jane104",
                            "last_name": "doe104",
                            "rdv_solidarites_agent_id": 6407760773
                          }
                        ]
                      },
                      "invitations": [
                        {
                          "id": 2,
                          "format": "sms",
                          "clicked": false,
                          "rdv_with_referents": false,
                          "created_at": "2025-02-18T14:51:44.607+01:00",
                          "delivery_status": null,
                          "delivered_at": null,
                          "expires_at": "2025-02-25T14:51:44.587+01:00",
                          "motif_category": {
                            "id": 2,
                            "short_name": "rsa_orientation_16",
                            "name": "RSA orientation"
                          }
                        },
                        {
                          "id": 1,
                          "format": "email",
                          "clicked": false,
                          "rdv_with_referents": false,
                          "created_at": "2025-02-18T14:51:44.579+01:00",
                          "delivery_status": null,
                          "delivered_at": null,
                          "expires_at": "2025-02-25T14:51:44.554+01:00",
                          "motif_category": {
                            "id": 1,
                            "short_name": "rsa_orientation_15",
                            "name": "RSA orientation"
                          }
                        }
                      ]
                    }
                  }
                },
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "user": {
                      "$ref": "#/components/schemas/user_with_referents"
                    },
                    "invitations": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/invitation"
                      }
                    }
                  },
                  "required": [
                    "success",
                    "user",
                    "invitations"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Renvoie 'forbidden' quand l'agent n'a pas les droits pour effectuer cette action",
            "content": {
              "application/json": {
                "examples": {
                  "Renvoie 'forbidden' quand l'agent n'a pas les droits pour effectuer cette action": {
                    "value": {
                      "errors": [
                        "Votre compte ne vous permet pas d'effectuer cette action"
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_forbidden"
                }
              }
            }
          },
          "401": {
            "description": "Renvoie 'unauthorized' quand l'authentification est impossible",
            "content": {
              "application/json": {
                "examples": {
                  "Renvoie 'unauthorized' quand l'authentification est impossible": {
                    "value": {
                      "errors": [
                        "Les identifiants de session RDV-Solidarités sont invalides"
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_authentication"
                }
              }
            }
          },
          "404": {
            "description": "Renvoie 'not_found' quand l'organisation n'existe pas",
            "content": {
              "application/json": {
                "examples": {
                  "Renvoie 'not_found' quand l'organisation n'existe pas": {
                    "value": {
                      "not_found": "Organisation"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_not_found"
                }
              }
            }
          },
          "422": {
            "description": "Renvoie 'unprocessable_entity' quand quand l'adresse mail du réferent ne correspond à aucun agent enregistré",
            "content": {
              "application/json": {
                "examples": {
                  "Renvoie 'unprocessable_entity' quand les paramètres sont incomplets": {
                    "value": {
                      "success": false,
                      "errors": [
                        {
                          "error_details": "Prénom doit être rempli(e)",
                          "first_name": "",
                          "last_name": "Drogba"
                        }
                      ]
                    }
                  },
                  "Renvoie 'unprocessable_entity' quand les paramètres sont invalide": {
                    "value": {
                      "success": false,
                      "errors": [
                        {
                          "error_details": "Email n'est pas valide",
                          "first_name": "Didier",
                          "last_name": "Drogba"
                        }
                      ]
                    }
                  },
                  "Renvoie 'unprocessable_entity' quand l'usager ne peut pas être créé": {
                    "value": {
                      "success": false,
                      "errors": [
                        {
                          "error_details": "Impossible de créer l'usager: L'usager n'a pas pu être créé"
                        }
                      ]
                    }
                  },
                  "Renvoie 'unprocessable_entity' quand une invitation ne peut pas être envoyée": {
                    "value": {
                      "success": false,
                      "errors": [
                        {
                          "error_details": "Erreur en envoyant l'invitation par sms: l'invitation n'a pas pu être délivrée"
                        },
                        {
                          "error_details": "Erreur en envoyant l'invitation par email: l'invitation n'a pas pu être délivrée"
                        }
                      ]
                    }
                  },
                  "Renvoie 'unprocessable_entity' quand quand l'adresse mail du réferent ne correspond à aucun agent enregistré": {
                    "value": {
                      "success": false,
                      "errors": [
                        {
                          "error_details": "Assignation du référent impossible car aucun agent n'a été retrouvé avec l'adresse agentnontrouve@nomdedomaine.fr au sein de l'organisation Organisation n°47503. "
                        }
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_unprocessable_entity"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "user": {
                    "$ref": "#/components/schemas/user_params"
                  },
                  "required": [
                    "users"
                  ]
                }
              },
              "examples": {
                "succes": {
                  "summary": "succès",
                  "value": {
                    "user": {
                      "first_name": "Didier",
                      "last_name": "Drogba",
                      "title": "monsieur",
                      "affiliation_number": "10492390",
                      "role": "demandeur",
                      "email": "didier@drogba.com",
                      "phone_number": "0782605941",
                      "birth_date": "11/03/1980",
                      "birth_name": null,
                      "address": "13 rue de la République 13001 MARSEILLE",
                      "department_internal_id": "11111444",
                      "nir": "180468432678931",
                      "referents_to_add": [
                        {
                          "email": "agentreferent@nomdedomaine.fr"
                        }
                      ],
                      "invitation": {
                        "motif_category": {
                          "name": "RSA orientation"
                        }
                      }
                    }
                  }
                },
                "pour_une_organisation_de_typesiae": {
                  "summary": "Pour une organisation de typeSIAE",
                  "value": {
                    "user": {
                      "first_name": "Didier",
                      "last_name": "Drogba",
                      "title": "monsieur",
                      "affiliation_number": "10492390",
                      "role": "demandeur",
                      "email": "didier@drogba.com",
                      "phone_number": "0782605941",
                      "birth_date": "11/03/1980",
                      "birth_name": null,
                      "address": "13 rue de la République 13001 MARSEILLE",
                      "department_internal_id": "11111444",
                      "nir": "180115646922788",
                      "referents_to_add": [
                        {
                          "email": "agentreferent@nomdedomaine.fr"
                        }
                      ],
                      "invitation": {
                        "motif_category": {
                          "name": "RSA orientation"
                        }
                      }
                    }
                  }
                },
                "pour_une_organisation_de_typedelegataire_rsa": {
                  "summary": "Pour une organisation de typeDélégataire RSA",
                  "value": {
                    "user": {
                      "first_name": "Didier",
                      "last_name": "Drogba",
                      "title": "monsieur",
                      "affiliation_number": "10492390",
                      "role": "demandeur",
                      "email": "didier@drogba.com",
                      "phone_number": "0782605941",
                      "birth_date": "11/03/1980",
                      "birth_name": null,
                      "address": "13 rue de la République 13001 MARSEILLE",
                      "department_internal_id": "11111444",
                      "nir": "180726842233703",
                      "referents_to_add": [
                        {
                          "email": "agentreferent@nomdedomaine.fr"
                        }
                      ],
                      "invitation": {
                        "motif_category": {
                          "name": "RSA orientation"
                        }
                      }
                    }
                  }
                },
                "pour_une_organisation_de_typeautre": {
                  "summary": "Pour une organisation de typeAutre",
                  "value": {
                    "user": {
                      "first_name": "Didier",
                      "last_name": "Drogba",
                      "title": "monsieur",
                      "affiliation_number": "10492390",
                      "role": "demandeur",
                      "email": "didier@drogba.com",
                      "phone_number": "0782605941",
                      "birth_date": "11/03/1980",
                      "birth_name": null,
                      "address": "13 rue de la République 13001 MARSEILLE",
                      "department_internal_id": "11111444",
                      "nir": "180231483666851",
                      "referents_to_add": [
                        {
                          "email": "agentreferent@nomdedomaine.fr"
                        }
                      ],
                      "invitation": {
                        "motif_category": {
                          "name": "RSA orientation"
                        }
                      }
                    }
                  }
                },
                "renvoie_forbidden_quand_l_agent_n_a_pas_les_droits_pour_effectuer_cette_action": {
                  "summary": "Renvoie 'forbidden' quand l'agent n'a pas les droits pour effectuer cette action",
                  "value": {
                    "user": {
                      "first_name": "Didier",
                      "last_name": "Drogba",
                      "title": "monsieur",
                      "affiliation_number": "10492390",
                      "role": "demandeur",
                      "email": "didier@drogba.com",
                      "phone_number": "0782605941",
                      "birth_date": "11/03/1980",
                      "birth_name": null,
                      "address": "13 rue de la République 13001 MARSEILLE",
                      "department_internal_id": "11111444",
                      "nir": "180113197277365",
                      "referents_to_add": [
                        {
                          "email": "agentreferent@nomdedomaine.fr"
                        }
                      ],
                      "invitation": {
                        "motif_category": {
                          "name": "RSA orientation"
                        }
                      }
                    }
                  }
                },
                "renvoie_unauthorized_quand_l_authentification_est_impossible": {
                  "summary": "Renvoie 'unauthorized' quand l'authentification est impossible",
                  "value": {
                    "user": {
                      "first_name": "Didier",
                      "last_name": "Drogba",
                      "title": "monsieur",
                      "affiliation_number": "10492390",
                      "role": "demandeur",
                      "email": "didier@drogba.com",
                      "phone_number": "0782605941",
                      "birth_date": "11/03/1980",
                      "birth_name": null,
                      "address": "13 rue de la République 13001 MARSEILLE",
                      "department_internal_id": "11111444",
                      "nir": "180176497647728",
                      "referents_to_add": [
                        {
                          "email": "agentreferent@nomdedomaine.fr"
                        }
                      ],
                      "invitation": {
                        "motif_category": {
                          "name": "RSA orientation"
                        }
                      }
                    }
                  }
                },
                "renvoie_not_found_quand_l_organisation_n_existe_pas": {
                  "summary": "Renvoie 'not_found' quand l'organisation n'existe pas",
                  "value": {
                    "user": {
                      "first_name": "Didier",
                      "last_name": "Drogba",
                      "title": "monsieur",
                      "affiliation_number": "10492390",
                      "role": "demandeur",
                      "email": "didier@drogba.com",
                      "phone_number": "0782605941",
                      "birth_date": "11/03/1980",
                      "birth_name": null,
                      "address": "13 rue de la République 13001 MARSEILLE",
                      "department_internal_id": "11111444",
                      "nir": "180168651346630",
                      "referents_to_add": [
                        {
                          "email": "agentreferent@nomdedomaine.fr"
                        }
                      ],
                      "invitation": {
                        "motif_category": {
                          "name": "RSA orientation"
                        }
                      }
                    }
                  }
                },
                "renvoie_unprocessable_entity_quand_les_parametres_sont_incomplets": {
                  "summary": "Renvoie 'unprocessable_entity' quand les paramètres sont incomplets",
                  "value": {
                    "user": {
                      "first_name": "",
                      "last_name": "Drogba",
                      "title": "monsieur",
                      "affiliation_number": "10492390",
                      "role": "demandeur",
                      "email": "didier@drogba.com",
                      "phone_number": "0782605941",
                      "birth_date": "11/03/1980",
                      "birth_name": null,
                      "address": "13 rue de la République 13001 MARSEILLE",
                      "department_internal_id": "11111444",
                      "nir": "180695934118762",
                      "referents_to_add": [
                        {
                          "email": "agentreferent@nomdedomaine.fr"
                        }
                      ],
                      "invitation": {
                        "motif_category": {
                          "name": "RSA orientation"
                        }
                      }
                    }
                  }
                },
                "renvoie_unprocessable_entity_quand_les_parametres_sont_invalide": {
                  "summary": "Renvoie 'unprocessable_entity' quand les paramètres sont invalide",
                  "value": {
                    "user": {
                      "first_name": "Didier",
                      "last_name": "Drogba",
                      "title": "monsieur",
                      "affiliation_number": "10492390",
                      "role": "demandeur",
                      "email": "invalid@email",
                      "phone_number": "0782605941",
                      "birth_date": "11/03/1980",
                      "birth_name": null,
                      "address": "13 rue de la République 13001 MARSEILLE",
                      "department_internal_id": "11111444",
                      "nir": "180577412815270",
                      "referents_to_add": [
                        {
                          "email": "agentreferent@nomdedomaine.fr"
                        }
                      ],
                      "invitation": {
                        "motif_category": {
                          "name": "RSA orientation"
                        }
                      }
                    }
                  }
                },
                "renvoie_unprocessable_entity_quand_l_usager_ne_peut_pas_etre_cree": {
                  "summary": "Renvoie 'unprocessable_entity' quand l'usager ne peut pas être créé",
                  "value": {
                    "user": {
                      "first_name": "Didier",
                      "last_name": "Drogba",
                      "title": "monsieur",
                      "affiliation_number": "10492390",
                      "role": "demandeur",
                      "email": "didier@drogba.com",
                      "phone_number": "0782605941",
                      "birth_date": "11/03/1980",
                      "birth_name": null,
                      "address": "13 rue de la République 13001 MARSEILLE",
                      "department_internal_id": "11111444",
                      "nir": "180156624152126",
                      "referents_to_add": [
                        {
                          "email": "agentreferent@nomdedomaine.fr"
                        }
                      ],
                      "invitation": {
                        "motif_category": {
                          "name": "RSA orientation"
                        }
                      }
                    }
                  }
                },
                "renvoie_unprocessable_entity_quand_une_invitation_ne_peut_pas_etre_envoyee": {
                  "summary": "Renvoie 'unprocessable_entity' quand une invitation ne peut pas être envoyée",
                  "value": {
                    "user": {
                      "first_name": "Didier",
                      "last_name": "Drogba",
                      "title": "monsieur",
                      "affiliation_number": "10492390",
                      "role": "demandeur",
                      "email": "didier@drogba.com",
                      "phone_number": "0782605941",
                      "birth_date": "11/03/1980",
                      "birth_name": null,
                      "address": "13 rue de la République 13001 MARSEILLE",
                      "department_internal_id": "11111444",
                      "nir": "180549643572128",
                      "referents_to_add": [
                        {
                          "email": "agentreferent@nomdedomaine.fr"
                        }
                      ],
                      "invitation": {
                        "motif_category": {
                          "name": "RSA orientation"
                        }
                      }
                    }
                  }
                },
                "renvoie_unprocessable_entity_quand_quand_l_adresse_mail_du_referent_ne_correspond_a_aucun_agent_enregistre": {
                  "summary": "Renvoie 'unprocessable_entity' quand quand l'adresse mail du réferent ne correspond à aucun agent enregistré",
                  "value": {
                    "user": {
                      "first_name": "Didier",
                      "last_name": "Drogba",
                      "title": "monsieur",
                      "affiliation_number": "10492390",
                      "role": "demandeur",
                      "email": "didier@drogba.com",
                      "phone_number": "0782605941",
                      "birth_date": "11/03/1980",
                      "birth_name": null,
                      "address": "13 rue de la République 13001 MARSEILLE",
                      "department_internal_id": "11111444",
                      "nir": "180138438533530",
                      "referents_to_add": [
                        {
                          "email": "agentnontrouve@nomdedomaine.fr"
                        }
                      ],
                      "invitation": {
                        "motif_category": {
                          "name": "RSA orientation"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "required": true
        }
      }
    }
  }
}