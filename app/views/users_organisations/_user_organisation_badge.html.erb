<span class="<%= css_classes_for_organisation_badge(archive) %>" <%= tooltip_for_archived_organisation_badge(archive) %>>
  <span class="text-truncate">
    <%= organisation.name %>
    <% if department.id != organisation.department_id %>
      <span class="text-dark-grey-alt">
        &nbsp;(<%= organisation.department.number %> - <%= organisation.department.name %>)
      </span>
    <% end %>
  </span>
  <div class="d-none">
    <% if user.organisations.count > 1 %>
      <%= render("common/triggerable_modal", id: "remove_user_org_modal_confirm-#{organisation.id}") do %>
        <%= render("users_organisations/remove_user_from_organisation_confirm", user:, organisation:) %>
      <% end %>
    <% else %>
      <%= render("common/triggerable_modal", id: "remove_user_org_modal_confirm-#{organisation.id}") do %>
        <%= render("users_organisations/remove_user_from_last_organisation_confirm", user:, organisation:) %>
      <% end %>
    <% end %>
  </div>
  <% if with_delete && policy(organisation).unassign? %>
    <%= link_to(users_organisations_path(user: user.id, users_organisation: { user_id: user.id, organisation_id: organisation.id }), data: {
          turbo_confirm: true,
          turbo_confirm_template: "remove_user_org_modal_confirm",
          turbo_method: :delete,
        }, class: 'text-dark-grey-alt ms-2' ) do %>
      <i class="ri-close-line"></i>
    <% end %>
  <% end %>
</span>
